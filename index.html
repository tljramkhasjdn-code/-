<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHADOW UNIT - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #1a1a1a;
            color: #808080;
            font-family: 'Segoe UI', Tahoma, sans-serif;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid #666;
            margin-bottom: 30px;
        }
        
        .title {
            color: #666;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #888;
            font-size: 0.9em;
        }
        
        .card {
            background: rgba(50, 50, 50, 0.8);
            border: 1px solid #555;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-title {
            color: #777;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }
        
        textarea {
            width: 100%;
            background: rgba(30, 30, 30, 0.9);
            border: 1px solid #666;
            border-radius: 4px;
            color: #aaa;
            padding: 10px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 10px;
        }
        
        textarea:focus {
            outline: none;
            border-color: #777;
        }
        
        button {
            background: #555;
            color: #ccc;
            border: 1px solid #666;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 1em;
            margin-top: 10px;
        }
        
        button:hover {
            background: #666;
            color: #fff;
        }
        
        .result {
            background: rgba(40, 40, 40, 0.9);
            border: 1px solid #555;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            min-height: 80px;
            color: #bbb;
            font-family: monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-break: break-all;
            position: relative;
        }
        
        .copy-btn {
            position: absolute;
            top: 5px;
            left: 5px;
            background: rgba(100, 100, 100, 0.3);
            color: #aaa;
            border: 1px solid #666;
            padding: 3px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .copy-btn:hover {
            background: rgba(120, 120, 120, 0.4);
        }
        
        .info {
            color: #888;
            font-size: 12px;
            text-align: center;
            margin-top: 10px;
        }
        
        .error {
            color: #aa6666;
            font-size: 12px;
            text-align: center;
            margin-top: 10px;
            display: none;
        }
        
        .language {
            color: #888;
            font-size: 11px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">SHADOW UNIT</div>
            <div class="subtitle">Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠ - ÙŠØ¹Ù…Ù„ ÙÙˆØ±Ø§Ù‹</div>
        </div>
        
        <!-- Ø§Ù„ØªØ´ÙÙŠØ± -->
        <div class="card">
            <div class="card-title">ğŸ”’ ØªØ´ÙÙŠØ± Ø§Ù„Ù†Øµ</div>
            <textarea id="inputText" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§ Ø¨Ø£ÙŠ Ù„ØºØ©..."></textarea>
            <div class="language" id="inputLanguage">âš¡ ÙŠØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù„ØºØ©</div>
            <button id="encryptBtn">ØªØ´ÙÙŠØ±</button>
            <div class="result" id="encryptResult">
                <button class="copy-btn" onclick="copyText('encryptResult')">Ù†Ø³Ø®</button>
                <div id="encryptOutput">Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ø´ÙØ±Ø© Ù‡Ù†Ø§</div>
            </div>
            <div class="info" id="encryptInfo"></div>
        </div>
        
        <!-- ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± -->
        <div class="card">
            <div class="card-title">ğŸ”“ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±</div>
            <textarea id="inputCode" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ø´ÙØ±Ø© Ù‡Ù†Ø§..."></textarea>
            <button id="decryptBtn">ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±</button>
            <div class="error" id="decryptError"></div>
            <div class="result" id="decryptResult">
                <button class="copy-btn" onclick="copyText('decryptResult')">Ù†Ø³Ø®</button>
                <div id="decryptOutput">Ø³ÙŠØ¹ÙˆØ¯ Ø§Ù„Ù†Øµ Ø§Ù„Ø£ØµÙ„ÙŠ Ù‡Ù†Ø§</div>
            </div>
            <div class="info" id="decryptInfo"></div>
        </div>
        
        <div class="info">
            Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠØ§Ù‹ - Ù„Ø§ ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø®Ø§Ø±Ø¬
        </div>
    </div>

    <script>
        // ========== Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ø¹Ù…Ù„ÙŠ ==========
        // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ„ÙƒÙ†Ù‡Ø§ Ù…Ø®ØµØµØ© ØªÙ…Ø§Ù…Ø§Ù‹
        
        class ShadowCipher {
            constructor() {
                // Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø®ÙÙŠ
                this.key = {
                    // Ø£Ø¹Ø¯Ø§Ø¯ Ø£ÙˆÙ„ÙŠØ© Ø®Ø§ØµØ©
                    primes: [7919, 7907, 7877, 7867],
                    // Ø¥Ø²Ø§Ø­Ø§Øª Ø®Ø§ØµØ©
                    shifts: [3, 7, 11, 13],
                    // ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù†Ø¸Ø§Ù…
                    signature: 'SHADOW2024'
                };
            }
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù…
            textToNumbers(text) {
                const numbers = [];
                for(let i = 0; i < text.length; i++) {
                    // Ø§Ø³ØªØ®Ø¯Ù… charCodeAt Ù…Ø¹ Unicode ÙƒØ§Ù…Ù„
                    numbers.push(text.charCodeAt(i));
                }
                return numbers;
            }
            
            // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¥Ù„Ù‰ Ù†Øµ
            numbersToText(numbers) {
                let text = '';
                for(let num of numbers) {
                    // Ø§Ø³ØªØ®Ø¯Ù… fromCharCode Ù…Ø¹ Unicode ÙƒØ§Ù…Ù„
                    text += String.fromCharCode(num);
                }
                return text;
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ø§Ù„ØªØ´ÙÙŠØ±
            encryptNumbers(numbers) {
                const encrypted = [];
                const key = this.key;
                
                for(let i = 0; i < numbers.length; i++) {
                    let num = numbers[i];
                    
                    // ØªØ·Ø¨ÙŠÙ‚ Ø³Ù„Ø³Ù„Ø© ØªØ­ÙˆÙŠÙ„Ø§Øª
                    for(let j = 0; j < key.primes.length; j++) {
                        // XOR Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠ
                        num = num ^ key.primes[j];
                        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø²Ø§Ø­Ø©
                        num = (num + key.shifts[j]) % 65536;
                        // ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¨ØªØ§Øª
                        num = ((num << (j+1)) | (num >> (16 - (j+1)))) & 0xFFFF;
                    }
                    
                    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ÙˆØ¶Ø¹
                    num = (num + i * 17) % 65536;
                    
                    encrypted.push(num);
                }
                
                return encrypted;
            }
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±
            decryptNumbers(numbers) {
                const decrypted = [];
                const key = this.key;
                
                for(let i = 0; i < numbers.length; i++) {
                    let num = numbers[i];
                    
                    // Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ÙˆØ¶Ø¹
                    num = (num - i * 17 + 65536) % 65536;
                    
                    // ØªØ·Ø¨ÙŠÙ‚ Ø³Ù„Ø³Ù„Ø© ØªØ­ÙˆÙŠÙ„Ø§Øª Ø¹ÙƒØ³ÙŠØ©
                    for(let j = key.primes.length - 1; j >= 0; j--) {
                        // Ø¥Ù„ØºØ§Ø¡ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¨ØªØ§Øª
                        num = ((num >> (j+1)) | (num << (16 - (j+1)))) & 0xFFFF;
                        // Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥Ø²Ø§Ø­Ø©
                        num = (num - key.shifts[j] + 65536) % 65536;
                        // XOR Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙˆÙ„ÙŠ (Ù†ÙØ³ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©)
                        num = num ^ key.primes[j];
                    }
                    
                    decrypted.push(num);
                }
                
                return decrypted;
            }
            
            // Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
            encrypt(text) {
                try {
                    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù…
                    const numbers = this.textToNumbers(text);
                    
                    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ´ÙÙŠØ±
                    const encryptedNumbers = this.encryptNumbers(numbers);
                    
                    // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù†Øµ Ø¢Ù…Ù†
                    let result = this.key.signature + ':';
                    for(let num of encryptedNumbers) {
                        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ù‚Ù… Ø¥Ù„Ù‰ Ø­Ø±ÙÙŠÙ† hex
                        result += num.toString(16).padStart(4, '0');
                    }
                    
                    return { success: true, code: result };
                } catch (error) {
                    return { success: false, error: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´ÙÙŠØ±' };
                }
            }
            
            // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
            decrypt(code) {
                try {
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙˆÙ‚ÙŠØ¹
                    if (!code.startsWith(this.key.signature + ':')) {
                        return { success: false, error: 'Ø´ÙØ±Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø©' };
                    }
                    
                    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªÙˆÙ‚ÙŠØ¹
                    const hexData = code.substring(this.key.signature.length + 1);
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø·ÙˆÙ„
                    if (hexData.length % 4 !== 0) {
                        return { success: false, error: 'ØªÙ†Ø³ÙŠÙ‚ Ø´ÙØ±Ø© Ø®Ø§Ø·Ø¦' };
                    }
                    
                    // ØªØ­ÙˆÙŠÙ„ hex Ø¥Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù…
                    const numbers = [];
                    for(let i = 0; i < hexData.length; i += 4) {
                        const hex = hexData.substr(i, 4);
                        const num = parseInt(hex, 16);
                        if (isNaN(num)) {
                            return { success: false, error: 'Ø´ÙØ±Ø© ØªØ§Ù„ÙØ©' };
                        }
                        numbers.push(num);
                    }
                    
                    // ØªØ·Ø¨ÙŠÙ‚ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±
                    const decryptedNumbers = this.decryptNumbers(numbers);
                    
                    // ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ù†Øµ
                    const text = this.numbersToText(decryptedNumbers);
                    
                    return { success: true, text: text };
                } catch (error) {
                    return { success: false, error: 'Ø®Ø·Ø£ ÙÙŠ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±' };
                }
            }
        }
        
        // ========== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ==========
        const cipher = new ShadowCipher();
        
        // ========== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ==========
        function copyText(elementId) {
            const element = document.getElementById(elementId);
            const text = element.querySelector('div:last-child').innerText;
            
            if (text.includes('Ø³ØªØ¸Ù‡Ø±') || text.includes('Ø³ÙŠØ¹ÙˆØ¯')) {
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ù†Ø³Ø® Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª
            });
        }
        
        function detectLanguage(text) {
            if (!text.trim()) return '';
            
            if (/[\u0600-\u06FF]/.test(text)) return 'ğŸ‡¸ğŸ‡¦ Ø¹Ø±Ø¨ÙŠ';
            if (/[Ã§Ã‡ÄŸÄÄ±Ä°ÅŸÅÃ¶Ã–Ã¼Ãœ]/.test(text)) return 'ğŸ‡¹ğŸ‡· ØªØ±ÙƒÙŠ';
            if (/[Ã©Ã¨ÃªÃ«Ã‰ÃˆÃŠÃ‹Ã Ã¢Ã¤Ã€Ã‚Ã„Ã´Ã¶Ã”Ã–Ã»Ã¼Ã›ÃœÃ§Ã‡]/.test(text)) return 'ğŸ‡«ğŸ‡· ÙØ±Ù†Ø³ÙŠ';
            if (/[Ğ°-ÑĞ-Ğ¯Ñ‘Ğ]/.test(text)) return 'ğŸ‡·ğŸ‡º Ø±ÙˆØ³ÙŠ';
            if (/[\u4e00-\u9fff]/.test(text)) return 'ğŸ‡¨ğŸ‡³ ØµÙŠÙ†ÙŠ';
            if (/[a-zA-Z]/.test(text)) return 'ğŸ‡ºğŸ‡¸ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ';
            
            return 'ğŸŒ Ø£Ø®Ø±Ù‰';
        }
        
        // ========== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØµÙØ­Ø© ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¹Ù†Ø§ØµØ± DOM
            const inputText = document.getElementById('inputText');
            const inputLanguage = document.getElementById('inputLanguage');
            const encryptBtn = document.getElementById('encryptBtn');
            const encryptOutput = document.getElementById('encryptOutput');
            const encryptInfo = document.getElementById('encryptInfo');
            
            const inputCode = document.getElementById('inputCode');
            const decryptBtn = document.getElementById('decryptBtn');
            const decryptError = document.getElementById('decryptError');
            const decryptOutput = document.getElementById('decryptOutput');
            const decryptInfo = document.getElementById('decryptInfo');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ØºØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
            inputText.addEventListener('input', function() {
                const text = this.value;
                if (text.length > 0) {
                    const lang = detectLanguage(text);
                    inputLanguage.textContent = `ğŸŒ ${lang} | ${text.length} Ø­Ø±Ù`;
                } else {
                    inputLanguage.textContent = 'âš¡ ÙŠØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù„ØºØ©';
                }
            });
            
            // Ø²Ø± Ø§Ù„ØªØ´ÙÙŠØ±
            encryptBtn.addEventListener('click', function() {
                const text = inputText.value;
                
                if (!text.trim()) {
                    encryptOutput.textContent = 'âš ï¸ Ø£Ø¯Ø®Ù„ Ù†ØµØ§Ù‹';
                    encryptInfo.textContent = '';
                    return;
                }
                
                // ØªØ´ÙÙŠØ± ÙÙˆØ±ÙŠ
                const result = cipher.encrypt(text);
                
                if (result.success) {
                    encryptOutput.textContent = result.code;
                    const lang = detectLanguage(text);
                    encryptInfo.textContent = `âœ… ØªÙ… ØªØ´ÙÙŠØ± ${text.length} Ø­Ø±Ù (${lang})`;
                } else {
                    encryptOutput.textContent = 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´ÙÙŠØ±';
                    encryptInfo.textContent = '';
                }
            });
            
            // Ø²Ø± ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±
            decryptBtn.addEventListener('click', function() {
                const code = inputCode.value;
                
                if (!code.trim()) {
                    decryptOutput.textContent = 'âš ï¸ Ø£Ø¯Ø®Ù„ Ø´ÙØ±Ø©';
                    decryptError.style.display = 'none';
                    decryptInfo.textContent = '';
                    return;
                }
                
                // ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± ÙÙˆØ±ÙŠ
                const result = cipher.decrypt(code);
                
                if (result.success) {
                    decryptOutput.textContent = result.text;
                    const lang = detectLanguage(result.text);
                    decryptInfo.textContent = `âœ… ØªÙ… ÙÙƒ ${result.text.length} Ø­Ø±Ù (${lang})`;
                    decryptError.style.display = 'none';
                } else {
                    decryptOutput.textContent = 'âŒ ÙØ´Ù„ ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±';
                    decryptError.textContent = result.error;
                    decryptError.style.display = 'block';
                    decryptInfo.textContent = '';
                }
            });
            
            // ÙÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
            let decryptTimer;
            inputCode.addEventListener('input', function() {
                clearTimeout(decryptTimer);
                const code = this.value;
                
                decryptError.style.display = 'none';
                
                if (code.length > 30 && code.startsWith('SHADOW2024:')) {
                    decryptTimer = setTimeout(() => {
                        const result = cipher.decrypt(code);
                        if (result.success) {
                            decryptOutput.textContent = result.text;
                            const lang = detectLanguage(result.text);
                            decryptInfo.textContent = `ğŸ”“ ÙÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠ (${lang})`;
                        }
                    }, 300);
                }
            });
            
            // Ø£Ù…Ø«Ù„Ø©
            setTimeout(() => {
                // Ù…Ø«Ø§Ù„ Ù†ØµÙŠ
                const exampleText = "Ù…Ø±Ø­Ø¨Ø§! Ù‡Ø°Ø§ Ù†Ø¸Ø§Ù… ØªØ´ÙÙŠØ± SHADOW UNIT.";
                inputText.placeholder = `Ù…Ø«Ø§Ù„: ${exampleText}`;
                
                // Ù…Ø«Ø§Ù„ ØªØ´ÙÙŠØ±
                const encrypted = cipher.encrypt(exampleText);
                if (encrypted.success) {
                    inputCode.placeholder = `Ù…Ø«Ø§Ù„ Ø´ÙØ±Ø©: ${encrypted.code.substring(0, 50)}...`;
                }
            }, 500);
        });
        
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù…
        Object.freeze(ShadowCipher.prototype);
    </script>
</body>
</html>
